<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:jaxrs="http://cxf.apache.org/blueprint/jaxrs"
           xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
             http://cxf.apache.org/blueprint/jaxrs http://cxf.apache.org/schemas/blueprint/jaxrs.xsd">

	<!-- ############################################# Internal Services Expose ############################################# -->

	<!-- ########################### External Services Imports ################################ -->
	<reference id="userManager" interface="de.soco.software.simuspace.suscore.user.manager.UserManager" />

	<reference id="sessionFactory" interface="org.apache.karaf.shell.api.console.SessionFactory" />

	<reference id="entityManagerFactory" interface="javax.persistence.EntityManagerFactory" />

	<!-- ############################################# Simuspace BUS ############################################# -->

	<!-- ############################################# Services Exports ############################################# -->


	<!-- ############################################# Jax RS Server ############################################# -->

	<jaxrs:server id="permSusCoreService" address="/plugin">
		<jaxrs:serviceBeans>
			<ref component-id="pulginServiceBean" />
		</jaxrs:serviceBeans>
		<jaxrs:providers>
			<ref component-id="jsonProvider" />
		</jaxrs:providers>
	</jaxrs:server>

	<!-- ############################################# Beans ############################################# -->

	<!-- ############################################# Beans ############################################# -->

	<bean id="jsonProvider" class="org.codehaus.jackson.jaxrs.JacksonJsonProvider" />

	<!-- ############################################# Permission Beans ############################################# -->

	<bean id="pulginServiceBean" class="de.soco.software.simuspace.suscore.plugin.service.rest.impl.PluginServiceImpl">
		<property name="manager" ref="manager" />
	</bean>

	<bean id="manager" class="de.soco.software.simuspace.suscore.plugin.manager.impl.PluginManagerImpl">
		<property name="pluginDao" ref="pluginDao" />
		<property name="karafClient" ref="karafClient" />
		<property name="entityManagerFactory" ref="entityManagerFactory" />
	</bean>

	<bean id="karafClient" class="de.soco.software.simuspace.suscore.plugin.karaf.client.KarafClient">
	</bean>

	<bean id="pluginDao" class="de.soco.software.simuspace.suscore.plugin.dao.impl.PluginDAOImpl">
	</bean>

</blueprint>